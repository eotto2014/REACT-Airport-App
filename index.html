<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Airport Task Tracker</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const AirportTaskTracker = () => {
            const [tasks, setTasks] = useState([]);
            const [activeTab, setActiveTab] = useState('active');
            const [showTaskModal, setShowTaskModal] = useState(false);
            const [editingTask, setEditingTask] = useState(null);
            const [expandedProjects, setExpandedProjects] = useState({});
            
            const [filters, setFilters] = useState({
                category: 'all',
                priority: 'all',
                assignee: 'all'
            });

            const [taskForm, setTaskForm] = useState({
                title: '',
                category: 'fuel-qc',
                priority: 'none',
                assignee: '',
                status: 'not-started',
                dueDate: '',
                notes: '',
                isMajorProject: false,
                subtasks: []
            });

            const categories = [
                { id: 'fuel-qc', label: 'Fuel Quality Control', color: 'bg-violet-500' },
                { id: 'services', label: 'Scheduled Services', color: 'bg-blue-500' },
                { id: 'faults', label: 'Faults and Repairs', color: 'bg-red-500' },
                { id: 'capital', label: 'Capital Projects', color: 'bg-amber-500' },
                { id: 'administrative', label: 'Administrative', color: 'bg-cyan-500' }
            ];

            const priorities = [
                { id: 'none', label: 'None', color: 'bg-slate-500' },
                { id: 'low', label: 'Low', color: 'bg-green-500' },
                { id: 'medium', label: 'Medium', color: 'bg-yellow-500' },
                { id: 'high', label: 'High', color: 'bg-orange-500' },
                { id: 'critical', label: 'Critical', color: 'bg-red-600' }
            ];

            const statuses = [
                { id: 'not-started', label: 'Not Started' },
                { id: 'in-progress', label: 'In Progress' },
                { id: 'completed', label: 'Completed' }
            ];

            const teamMembers = ['Pat', 'Evan', 'Cody', 'Wyatt', 'Carlos'];

            // Load from localStorage
            useEffect(() => {
                const saved = localStorage.getItem('airportTasks');
                if (saved) {
                    setTasks(JSON.parse(saved));
                }
            }, []);

            // Save to localStorage
            useEffect(() => {
                if (tasks.length > 0) {
                    localStorage.setItem('airportTasks', JSON.stringify(tasks));
                }
            }, [tasks]);

            const resetTaskForm = () => {
                setTaskForm({
                    title: '',
                    category: 'fuel-qc',
                    priority: 'none',
                    assignee: '',
                    status: 'not-started',
                    dueDate: '',
                    notes: '',
                    isMajorProject: false,
                    subtasks: []
                });
            };

            const openAddTask = () => {
                resetTaskForm();
                setEditingTask(null);
                setShowTaskModal(true);
            };

            const openEditTask = (task) => {
                setTaskForm(task);
                setEditingTask(task);
                setShowTaskModal(true);
            };

            const saveTask = () => {
                if (!taskForm.title.trim()) return;

                if (editingTask) {
                    setTasks(tasks.map(t => t.id === editingTask.id ? { ...taskForm, id: editingTask.id } : t));
                } else {
                    const newTask = {
                        ...taskForm,
                        id: Date.now(),
                        createdAt: new Date().toISOString()
                    };
                    setTasks([...tasks, newTask]);
                }
                
                setShowTaskModal(false);
                resetTaskForm();
            };

            const deleteTask = (id) => {
                if (confirm('Are you sure you want to delete this task?')) {
                    setTasks(tasks.filter(t => t.id !== id));
                }
            };

            const updateTaskStatus = (id, newStatus) => {
                setTasks(tasks.map(t => 
                    t.id === id ? { ...t, status: newStatus } : t
                ));
            };

            const toggleProjectExpansion = (projectId) => {
                setExpandedProjects(prev => ({
                    ...prev,
                    [projectId]: !prev[projectId]
                }));
            };

            const getCategoryInfo = (id) => categories.find(c => c.id === id);
            const getPriorityInfo = (id) => priorities.find(p => p.id === id);

            const getFilteredTasks = () => {
                return tasks.filter(task => {
                    const tabMatch = activeTab === 'active' ? task.status !== 'completed' : task.status === 'completed';
                    if (!tabMatch) return false;

                    if (filters.category !== 'all' && task.category !== filters.category) return false;
                    if (filters.priority !== 'all' && task.priority !== filters.priority) return false;
                    if (filters.assignee !== 'all' && task.assignee !== filters.assignee) return false;
                    
                    return true;
                });
            };

            const filteredTasks = getFilteredTasks();

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4 md:p-8">
                    <div className="max-w-7xl mx-auto">
                        {/* Header */}
                        <div className="bg-slate-800 rounded-xl shadow-2xl p-6 mb-6 border border-slate-700">
                            <div className="flex justify-between items-center mb-6">
                                <div>
                                    <h1 className="text-3xl font-bold text-white">Airport Task Tracker</h1>
                                    <p className="text-slate-400 text-sm mt-1">Simplified Version</p>
                                </div>
                                <button
                                    onClick={openAddTask}
                                    className="flex items-center gap-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white px-4 py-2 rounded-lg hover:from-green-500 hover:to-emerald-500 transition-all shadow-lg"
                                >
                                    <span className="text-xl">+</span>
                                    Add Task
                                </button>
                            </div>

                            {/* Tabs */}
                            <div className="flex gap-2 border-b border-slate-700">
                                <button
                                    onClick={() => setActiveTab('active')}
                                    className={`px-4 py-2 font-medium transition-colors ${
                                        activeTab === 'active'
                                            ? 'text-cyan-400 border-b-2 border-cyan-400'
                                            : 'text-slate-400 hover:text-slate-300'
                                    }`}
                                >
                                    Active Tasks ({tasks.filter(t => t.status !== 'completed').length})
                                </button>
                                <button
                                    onClick={() => setActiveTab('completed')}
                                    className={`px-4 py-2 font-medium transition-colors ${
                                        activeTab === 'completed'
                                            ? 'text-cyan-400 border-b-2 border-cyan-400'
                                            : 'text-slate-400 hover:text-slate-300'
                                    }`}
                                >
                                    Completed Tasks ({tasks.filter(t => t.status === 'completed').length})
                                </button>
                            </div>
                        </div>

                        {/* Filters */}
                        <div className="bg-slate-800 rounded-xl shadow-xl p-4 mb-6 border border-slate-700">
                            <div className="flex flex-wrap gap-3 items-center">
                                <span className="text-slate-400 text-sm font-medium">Filters:</span>
                                
                                <select
                                    value={filters.category}
                                    onChange={(e) => setFilters({...filters, category: e.target.value})}
                                    className="bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-1.5 text-sm"
                                >
                                    <option value="all">All Categories</option>
                                    {categories.map(c => <option key={c.id} value={c.id}>{c.label}</option>)}
                                </select>

                                <select
                                    value={filters.priority}
                                    onChange={(e) => setFilters({...filters, priority: e.target.value})}
                                    className="bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-1.5 text-sm"
                                >
                                    <option value="all">All Priorities</option>
                                    {priorities.map(p => <option key={p.id} value={p.id}>{p.label}</option>)}
                                </select>

                                <select
                                    value={filters.assignee}
                                    onChange={(e) => setFilters({...filters, assignee: e.target.value})}
                                    className="bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-1.5 text-sm"
                                >
                                    <option value="all">All Team Members</option>
                                    {teamMembers.map(m => <option key={m} value={m}>{m}</option>)}
                                </select>
                            </div>
                        </div>

                        {/* Tasks List */}
                        <div className="space-y-4">
                            {filteredTasks.length === 0 ? (
                                <div className="bg-slate-800 rounded-xl p-12 text-center border border-slate-700">
                                    <p className="text-slate-400 text-lg">No tasks found</p>
                                </div>
                            ) : (
                                filteredTasks.map(task => {
                                    const categoryInfo = getCategoryInfo(task.category);
                                    const priorityInfo = getPriorityInfo(task.priority);
                                    
                                    return (
                                        <div key={task.id} className="bg-slate-800 rounded-xl border border-slate-700 hover:border-slate-600 transition-all p-5">
                                            <div className="flex items-start justify-between gap-4 mb-3">
                                                <div className="flex-1">
                                                    <div className="flex items-center gap-3 mb-2">
                                                        <h3 className="text-lg font-semibold text-white">{task.title}</h3>
                                                        {task.dueDate && (
                                                            <span className="bg-slate-600 text-white px-2 py-1 rounded text-xs">
                                                                📅 {new Date(task.dueDate).toLocaleDateString()}
                                                            </span>
                                                        )}
                                                    </div>
                                                    {task.notes && (
                                                        <p className="text-slate-400 text-sm mb-3">{task.notes}</p>
                                                    )}
                                                </div>

                                                <div className="flex flex-col gap-2 items-end">
                                                    <div className="flex gap-2">
                                                        <button
                                                            onClick={() => openEditTask(task)}
                                                            className="text-blue-400 hover:text-blue-300 px-2 py-1 hover:bg-slate-700 rounded transition-all text-sm"
                                                        >
                                                            Edit
                                                        </button>
                                                        <button
                                                            onClick={() => deleteTask(task.id)}
                                                            className="text-red-400 hover:text-red-300 px-2 py-1 hover:bg-slate-700 rounded transition-all text-sm"
                                                        >
                                                            Delete
                                                        </button>
                                                    </div>

                                                    <select
                                                        value={task.status}
                                                        onChange={(e) => updateTaskStatus(task.id, e.target.value)}
                                                        className="bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-1.5 text-sm"
                                                    >
                                                        {statuses.map(s => (
                                                            <option key={s.id} value={s.id}>{s.label}</option>
                                                        ))}
                                                    </select>
                                                </div>
                                            </div>

                                            <div className="flex items-center gap-2 flex-wrap pt-3 border-t border-slate-700">
                                                <span className={`${categoryInfo.color} text-white px-3 py-1 rounded-lg text-xs font-semibold`}>
                                                    {categoryInfo.label}
                                                </span>
                                                <span className={`${priorityInfo.color} text-white px-3 py-1 rounded-lg text-xs font-semibold`}>
                                                    {priorityInfo.label}
                                                </span>
                                                {task.assignee && (
                                                    <span className="bg-indigo-600 text-white px-3 py-1 rounded-lg text-xs font-semibold">
                                                        👤 {task.assignee}
                                                    </span>
                                                )}
                                            </div>
                                        </div>
                                    );
                                })
                            )}
                        </div>
                    </div>

                    {/* Add/Edit Task Modal */}
                    {showTaskModal && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                            <div className="bg-slate-800 rounded-xl shadow-2xl max-w-2xl w-full border border-slate-700 max-h-[90vh] overflow-y-auto">
                                <div className="bg-slate-800 border-b border-slate-700 p-6 flex justify-between items-center sticky top-0">
                                    <h2 className="text-2xl font-bold text-white">
                                        {editingTask ? 'Edit Task' : 'Add New Task'}
                                    </h2>
                                    <button
                                        onClick={() => setShowTaskModal(false)}
                                        className="text-slate-400 hover:text-white transition-colors text-2xl"
                                    >
                                        ×
                                    </button>
                                </div>

                                <div className="p-6 space-y-4">
                                    <div>
                                        <label className="block text-white font-medium mb-2">Task Title *</label>
                                        <input
                                            type="text"
                                            value={taskForm.title}
                                            onChange={(e) => setTaskForm({...taskForm, title: e.target.value})}
                                            placeholder="Enter task title..."
                                            className="w-full bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-2"
                                        />
                                    </div>

                                    <div className="grid grid-cols-2 gap-4">
                                        <div>
                                            <label className="block text-white font-medium mb-2">Category</label>
                                            <select
                                                value={taskForm.category}
                                                onChange={(e) => setTaskForm({...taskForm, category: e.target.value})}
                                                className="w-full bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-2"
                                            >
                                                {categories.map(c => <option key={c.id} value={c.id}>{c.label}</option>)}
                                            </select>
                                        </div>

                                        <div>
                                            <label className="block text-white font-medium mb-2">Priority</label>
                                            <select
                                                value={taskForm.priority}
                                                onChange={(e) => setTaskForm({...taskForm, priority: e.target.value})}
                                                className="w-full bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-2"
                                            >
                                                {priorities.map(p => <option key={p.id} value={p.id}>{p.label}</option>)}
                                            </select>
                                        </div>
                                    </div>

                                    <div className="grid grid-cols-2 gap-4">
                                        <div>
                                            <label className="block text-white font-medium mb-2">Assigned To</label>
                                            <select
                                                value={taskForm.assignee}
                                                onChange={(e) => setTaskForm({...taskForm, assignee: e.target.value})}
                                                className="w-full bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-2"
                                            >
                                                <option value="">Unassigned</option>
                                                {teamMembers.map(m => <option key={m} value={m}>{m}</option>)}
                                            </select>
                                        </div>

                                        <div>
                                            <label className="block text-white font-medium mb-2">Status</label>
                                            <select
                                                value={taskForm.status}
                                                onChange={(e) => setTaskForm({...taskForm, status: e.target.value})}
                                                className="w-full bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-2"
                                            >
                                                {statuses.map(s => <option key={s.id} value={s.id}>{s.label}</option>)}
                                            </select>
                                        </div>
                                    </div>

                                    <div>
                                        <label className="block text-white font-medium mb-2">Due Date</label>
                                        <input
                                            type="date"
                                            value={taskForm.dueDate}
                                            onChange={(e) => setTaskForm({...taskForm, dueDate: e.target.value})}
                                            className="w-full bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-2"
                                        />
                                    </div>

                                    <div>
                                        <label className="block text-white font-medium mb-2">Notes</label>
                                        <textarea
                                            value={taskForm.notes}
                                            onChange={(e) => setTaskForm({...taskForm, notes: e.target.value})}
                                            placeholder="Add additional details..."
                                            rows={3}
                                            className="w-full bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-2"
                                        />
                                    </div>
                                </div>

                                <div className="bg-slate-800 border-t border-slate-700 p-4 flex justify-end gap-3">
                                    <button
                                        onClick={() => setShowTaskModal(false)}
                                        className="bg-slate-700 text-white px-6 py-2 rounded-lg hover:bg-slate-600 transition-colors"
                                    >
                                        Cancel
                                    </button>
                                    <button
                                        onClick={saveTask}
                                        className="bg-gradient-to-r from-green-600 to-emerald-600 text-white px-6 py-2 rounded-lg hover:from-green-500 hover:to-emerald-500 transition-colors"
                                    >
                                        {editingTask ? 'Save Changes' : 'Add Task'}
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        ReactDOM.render(<AirportTaskTracker />, document.getElementById('root'));
    </script>
</body>
</html>